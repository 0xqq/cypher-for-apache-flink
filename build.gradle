/*
 * This file was generated by the Gradle 'init' task.
 */

allprojects {
    apply plugin: 'maven'

    group = 'org.opencypher'
    version = '0.2.3-SNAPSHOT'
}

subprojects {
    apply plugin: 'java'
    apply plugin: 'scala'

    repositories {
        mavenLocal()
        maven {
            url = 'http://repo.maven.apache.org/maven2'
        }
    }

    dependencies {
        compile group: 'org.scala-lang', name: 'scala-library', version: scalaVersionFull

        compile group: 'org.apache.logging.log4j', name: 'log4j-api',                     version: '2.11.0'
        compile group: 'org.apache.logging.log4j', name: 'log4j-core',                    version: '2.11.0'
        compile group: 'org.apache.logging.log4j', name: "log4j-api-scala_$scalaVersion", version: '11.0'

        testCompile group: 'org.scalatest',      name: "scalatest_$scalaVersion",  version: '3.0.5'
        testCompile group: 'org.scalacheck',     name: "scalacheck_$scalaVersion", version: '1.13.5'
        testCompile group: 'org.junit.platform', name: 'junit-platform-runner',    version: '1.0.2'
    }

    tasks.withType(ScalaCompile) {
        scalaCompileOptions.additionalParameters = [
            "-target:jvm-1.8",
            '-unchecked',
            '-deprecation',
            '-feature',
            '-Xfatal-warnings',
            '-Xfuture',
            '-Ywarn-adapted-args',
            '-Yopt-warnings:at-inline-failed',
            '-Yopt:l:project',
            '-Ypartial-unification',
        ]
    }


    task packageSources(type: Jar) {
        classifier = 'sources'
        from(sourceSets.main.allSource)
    }

    sourceCompatibility = javaVersion
    artifacts.archives(tasks.packageSources)

    tasks.withType(JavaCompile) {
        options.encoding = 'UTF-8'
    }
}
